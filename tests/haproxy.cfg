global
    daemon
    maxconn 4096

defaults
    mode    tcp
    option  dontlognull
    timeout connect 5s
    timeout client  1m
    timeout server  1m

#==========================
#  FRONTENDS (host-exposed)
#==========================

frontend fe_8080
    bind *:8080
    default_backend b_8080

frontend fe_8081
    bind *:8081
    default_backend b_8081

frontend fe_8082
    bind *:8082
    default_backend b_8082

frontend fe_8443
    bind *:8443
    default_backend b_8443

frontend fe_8444
    bind *:8444
    default_backend b_8444

frontend fe_8445
    bind *:8445
    default_backend b_8445

#==========================
#  BACKENDS
#==========================

# No PROXY protocol
backend b_8080
    server pingora pingora:8080

backend b_8443
    server pingora pingora:8443

# PROXY protocol v1
backend b_8081
    server pingora pingora:8081 send-proxy

backend b_8444
    server pingora pingora:8444 send-proxy

# PROXY protocol v2
backend b_8082
    server pingora pingora:8082 send-proxy-v2

backend b_8445
    server pingora pingora:8445 send-proxy-v2
